.cpu cortex-m0
.thumb
.syntax unified
.fpu softvfp

.equ RCC,       0x40021000
.equ GPIOA,     0x48000000
.equ GPIOB,     0x48000400
.equ GPIOC,     0x48000800
.equ AHBENR,    0x14
.equ APB2ENR,   0x18
.equ APB1ENR,   0x1c
.equ IOPAEN,    0x20000
.equ IOPBEN,    0x40000
.equ IOPCEN,    0x80000
.equ SYSCFGCOMPEN, 1
.equ TIM3EN,    2
.equ MODER,     0
.equ OSPEEDR,   8
.equ PUPDR,     0xc
.equ IDR,       0x10
.equ ODR,       0x14
.equ BSRR,      0x18
.equ BRR,       0x28
.equ PC8,       0x100

// SYSCFG control registers
.equ SYSCFG,    0x40010000
.equ EXTICR1,   0x8
.equ EXTICR2,   0xc
.equ EXTICR3,   0x10
.equ EXTICR4,   0x14

// NVIC control registers
.equ NVIC,      0xe000e000
.equ ISER,      0x100

// External interrupt control registers
.equ EXTI,      0x40010400
.equ IMR,       0x00
.equ RTSR,      0x08
.equ PR,        0x14

.equ TIM3,      0x40000400
.equ TIMCR1,    0x00
.equ DIER,      0x0c
.equ TIMSR,     0x10
.equ PSC,       0x28
.equ ARR,       0x2c

// Popular interrupt numbers
.equ EXTI0_1_IRQn,   5
.equ EXTI2_3_IRQn,   6
.equ EXTI4_15_IRQn,  7
.equ EXTI4_15_IRQn,  7
.equ TIM2_IRQn,      15
.equ TIM3_IRQn,      16
.equ TIM6_DAC_IRQn,  17
.equ TIM7_IRQn,      18
.equ TIM14_IRQn,     19
.equ TIM15_IRQn,     20
.equ TIM16_IRQn,     21
.equ TIM17_IRQn,     22

//====================================================================
// Q1
//====================================================================
.global recur
recur:

//====================================================================
// Q2
//====================================================================
.global enable_portb
enable_portb:

//====================================================================
// Q3
//====================================================================
.global enable_portc
enable_portc:

//====================================================================
// Q4
//====================================================================
.global setup_pb3
setup_pb3:

//====================================================================
// Q5
//====================================================================
.global setup_pb4
setup_pb4:

//====================================================================
// Q6
//====================================================================
.global setup_pc8
setup_pc8:

//====================================================================
// Q7
//====================================================================
.global setup_pc9
setup_pc9:

//====================================================================
// Q8
//====================================================================
.global action8
action8:

//====================================================================
// Q9
//====================================================================
.global action9
action9:

//====================================================================
// Q10
//====================================================================
// Do everything needed to write the ISR here...

//====================================================================
// Q11
//====================================================================
.global enable_exti
enable_exti:

//====================================================================
// Q12
//====================================================================
// Do everything needed to write the ISR here...

//====================================================================
// Q13
//====================================================================
.global enable_tim3
enable_tim3:
